

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>21 Questions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .card-container {
            perspective: 1000px;
            height: 120px; /* Base height */
        }
        
        .card {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }
        
        .card.flipped {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 0.75rem;
        }
        
        .card-front {
            background-color: white;
        }
        
        .card-back {
            background-color: #e0e7ff;
            transform: rotateY(180deg);
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: confetti-fall 3s ease-in-out infinite;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        .selected-indicator {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            color: white;
        }
        
        .star {
            display: inline-block;
            font-size: 2rem;
            color: #d1d5db; /* gray-300 */
            transition: color 0.3s;
        }
        
        .star.filled {
            color: #fbbf24; /* amber-400 */
            animation: star-pop 0.5s ease-out;
        }
        
        @keyframes star-pop {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Custom container width */
        .game-container {
            width: 80%;
            max-width: 1400px; /* Increased max-width */
        }
        
        /* Responsive font sizes for cards */
        @media (min-width: 768px) {
            .card-text {
                font-size: 0.9rem;
            }
        }
        
        @media (min-width: 1280px) {
            .card-text {
                font-size: 1rem;
            }
            
            .card-container {
                height: 140px; /* Larger height for XL screens */
            }
        }
        
        @media (min-width: 1536px) {
            .card-text {
                font-size: 1.1rem;
            }
            
            .card-container {
                height: 150px; /* Even larger height for 2XL screens */
            }
            
            .game-container {
                max-width: 1600px; /* Wider container on 2XL screens */
            }
        }
        
        @media (max-width: 767px) {
            .card-text {
                font-size: 0.85rem;
            }
            
            .game-container {
                width: 95%;
            }
        }
        
        /* Toast notification */
        .toast-message {
            transition: opacity 0.3s ease;
        }
        
        /* Footer styling */
        .footer {
            margin-top: auto;
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.2);
            color: rgba(255, 255, 255, 0.8);
        }
        
        .footer a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
        }
        
        .footer a:hover {
            color: white;
        }
    </style>
</head>
<body class="p-4 flex flex-col justify-between min-h-screen" id="game-body">
    <!-- Audio element for correct answer sound -->
    <audio id="correct-sound" src="correct.mp3" preload="auto"></audio>

    <div class="game-container mx-auto bg-white rounded-xl shadow-xl overflow-hidden">
        <!-- Home page -->
        <div id="home-page" class="p-4 md:p-6">
            <div class="text-center mb-6">
                <h1 class="text-4xl font-bold text-indigo-800 mb-4">21 Questions</h1>
                <p class="text-xl text-gray-600">Test your deduction skills on <b>occupation</b> vocabulary!</p>
            </div>
            
            <div class="space-y-6 mb-8">
                <div class="bg-indigo-50 p-5 rounded-lg slide-in" style="animation-delay: 0.1s">
                    <h2 class="text-2xl font-semibold text-indigo-700 mb-3">How to Play</h2>
                    <ul class="space-y-3 text-gray-700">
                        <li class="flex items-start">
                            <span class="text-indigo-600 font-bold mr-2">1.</span>
                            <span>A mystery word has been selected.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-indigo-600 font-bold mr-2">2.</span>
                            <span>Tap on question cards to reveal answers about the word.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-indigo-600 font-bold mr-2">3.</span>
                            <span>After revealing some questions, try to guess the word.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-indigo-600 font-bold mr-2">4.</span>
                            <span>The fewer questions you need, the more stars you'll earn!</span>
                        </li>
                    </ul>
                </div>
                
                <div class="bg-amber-50 p-5 rounded-lg slide-in" style="animation-delay: 0.2s">
                    <h2 class="text-2xl font-semibold text-amber-700 mb-3">Star Rating System</h2>
                    <div class="flex items-center justify-center space-x-8 py-3">
                        <div class="text-center">
                            <div class="mb-2">
                                <span class="star filled">★</span>
                                <span class="star filled">★</span>
                                <span class="star filled">★</span>
                            </div>
                            <p class="font-medium">1-7 questions</p>
                        </div>
                        <div class="text-center">
                            <div class="mb-2">
                                <span class="star filled">★</span>
                                <span class="star filled">★</span>
                                <span class="star">★</span>
                            </div>
                            <p class="font-medium">8-14 questions</p>
                        </div>
                        <div class="text-center">
                            <div class="mb-2">
                                <span class="star filled">★</span>
                                <span class="star">★</span>
                                <span class="star">★</span>
                            </div>
                            <p class="font-medium">15-21 questions</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-green-50 p-5 rounded-lg slide-in" style="animation-delay: 0.3s">
                    <h2 class="text-2xl font-semibold text-green-700 mb-3">Tips</h2>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start">
                            <span class="text-green-600 mr-2">•</span>
                            <span>Choose your questions strategically to narrow down possibilities.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-600 mr-2">•</span>
                            <span>After 7 questions, a hint will appear to help you.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-600 mr-2">•</span>
                            <span>Type your guess exactly (not case sensitive).</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="text-center">
                <button id="start-game" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-8 rounded-lg transition-colors text-xl pulse">
                    Start Game
                </button>
            </div>
        </div>
        
        <!-- Game page -->
        <div id="game-page" class="p-4 md:p-6 hidden">
            <div class="text-center mb-5">
                <h1 class="text-3xl font-bold text-indigo-800">21 Questions</h1>
                <p class="text-gray-600 mt-2">Reveal questions to help you guess the word!</p>
                <div class="mt-3 flex justify-center items-center space-x-4">
                    <span class="text-sm bg-indigo-100 text-indigo-800 py-1 px-3 rounded-full">
                        Questions revealed: <span id="selected-count" class="font-bold">0</span>/<span id="total-questions">21</span>
                    </span>
                    <div class="stars-container">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                </div>
                <div class="mt-2 text-xs text-gray-500">
                    <span>3 stars: ≤7 questions</span> • 
                    <span>2 stars: ≤14 questions</span> • 
                    <span>1 star: ≤21 questions</span>
                </div>
            </div>
            
            <!-- Input area above -->
            <div class="mb-6 p-4 bg-indigo-50 rounded-lg">
                <div id="hint-container" class="mb-4 text-center hidden">
                    <p class="text-indigo-800 font-medium">Hint: <span id="hint-text"></span></p>
                </div>
                <div class="flex flex-col md:flex-row items-center gap-4">
                    <input type="text" id="guess-input" placeholder="Type your guess here..." 
                           class="flex-grow p-3 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <button id="submit-guess" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition-colors">
                        Submit Guess
                    </button>
                </div>
                <div id="result-container" class="mt-4 text-center hidden">
                    <p id="result-text" class="text-xl font-bold"></p>
                    <div id="star-rating" class="my-3">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                    <div class="flex justify-center space-x-4 mt-4">
                        <button id="play-again" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg transition-colors">
                            Play Again
                        </button>
                        <button id="back-to-home" class="bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors">
                            Back to Home
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7 gap-3" id="questions-container">
                <!-- Questions will be dynamically inserted here -->
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer mt-6 rounded-lg">
        <div class="container mx-auto flex flex-col md:flex-row justify-center items-center text-center md:text-left">
            <p class="mr-2">
                <a href="https://www.aaronshi.cc" target="_blank" rel="noopener noreferrer" class="flex items-center hover:text-white transition duration-300">
                    Go to AaronShi.cc
                </a>
            </p>
            <span class="mx-2 hidden md:inline">|</span>
            <a href="https://app.aaronshi.cc" target="_blank" rel="noopener noreferrer" class="flex items-center hover:text-white transition duration-300">
                Back to AaronShi.cc App
            </a>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const occupations = [
                {
                    name: "Doctor",
                    questions: {
                        "Do they work indoors?": "Yes",
                        "Do they need a college degree?": "Yes",
                        "Do they work with their hands?": "Yes",
                        "Do they wear a uniform?": "Yes, often a white coat",
                        "Do they work with technology?": "Yes, medical equipment",
                        "Do they work with children?": "Sometimes",
                        "Is their job dangerous?": "Can be, especially with infectious diseases",
                        "Do they work in teams?": "Yes, with nurses and other specialists",
                        "Do they need special certification?": "Yes, medical license",
                        "Do they work nights?": "Sometimes, especially in hospitals",
                        "Do they earn a high salary?": "Yes",
                        "Do they prescribe medication?": "Yes",
                        "Do they perform surgeries?": "Some do",
                        "Do they diagnose illnesses?": "Yes",
                        "Do they work in hospitals?": "Often",
                        "Do they use specialized tools?": "Yes, stethoscopes and other medical instruments",
                        "Do they work with the public?": "Yes, patients",
                        "Is physical fitness important?": "Somewhat, especially for long shifts",
                        "Do they specialize in specific areas?": "Often, like cardiology or pediatrics",
                        "Do they take an oath?": "Yes, the Hippocratic Oath",
                        "Are they self-employed?": "Sometimes have private practices"
                    },
                    hint: "They help people feel better and treat illnesses"
                },
                {
                    name: "Teacher",
                    questions: {
                        "Do they work indoors?": "Yes, in classrooms",
                        "Do they need a college degree?": "Yes",
                        "Do they work with their hands?": "Sometimes, especially when demonstrating",
                        "Do they wear a uniform?": "No, but usually dress professionally",
                        "Do they work with technology?": "Yes, increasingly so",
                        "Do they work with children?": "Yes",
                        "Is their job dangerous?": "No",
                        "Do they work in teams?": "Yes, with other educators",
                        "Do they need special certification?": "Yes, teaching credentials",
                        "Do they grade papers?": "Yes",
                        "Do they create lesson plans?": "Yes",
                        "Do they have summers off?": "Often",
                        "Do they earn a high salary?": "No, typically moderate",
                        "Do they work with parents?": "Yes, during conferences",
                        "Do they assign homework?": "Yes",
                        "Do they use specialized tools?": "Educational materials and resources",
                        "Do they work with the public?": "Yes, students and parents",
                        "Do they have a curriculum to follow?": "Yes",
                        "Do they work for the government?": "Often in public schools",
                        "Do they lead group activities?": "Yes",
                        "Are they self-employed?": "Rarely, except for tutors"
                    },
                    hint: "They help others learn and develop knowledge"
                },
                {
                    name: "Chef",
                    questions: {
                        "Do they work indoors?": "Yes, in kitchens",
                        "Do they need a college degree?": "No, but culinary school is common",
                        "Do they work with their hands?": "Yes, constantly",
                        "Do they wear a uniform?": "Yes, chef's whites and toque",
                        "Do they work with heat?": "Yes, stoves and ovens",
                        "Do they create recipes?": "Often",
                        "Is their job dangerous?": "Somewhat, burns and cuts are common",
                        "Do they work in teams?": "Yes, kitchen staff",
                        "Do they need special certification?": "Food safety certifications",
                        "Do they work nights?": "Often, especially in restaurants",
                        "Do they earn a high salary?": "Varies, celebrity chefs do",
                        "Do they work with knives?": "Yes, extensively",
                        "Do they travel for work?": "Sometimes, especially high-profile chefs",
                        "Do they taste food?": "Yes, constantly",
                        "Do they create things?": "Yes, dishes and menus",
                        "Do they use specialized tools?": "Yes, kitchen equipment",
                        "Do they work with the public?": "Sometimes, especially in open kitchens",
                        "Is physical fitness important?": "Yes, standing for long hours",
                        "Do they work under pressure?": "Yes, especially during service",
                        "Do they work with food?": "Yes, it's their primary medium",
                        "Can they become famous?": "Yes, through restaurants, books, and TV"
                    },
                    hint: "They create delicious dishes in restaurants"
                },
                {
                    name: "Firefighter",
                    questions: {
                        "Do they work indoors?": "Sometimes, but often at emergency scenes",
                        "Do they need a college degree?": "No, but training is required",
                        "Do they work with their hands?": "Yes",
                        "Do they wear a uniform?": "Yes, protective gear",
                        "Do they work with water?": "Yes, to extinguish fires",
                        "Do they rescue people?": "Yes",
                        "Is their job dangerous?": "Yes, very",
                        "Do they work in teams?": "Yes, crews",
                        "Do they need special certification?": "Yes, firefighting certification",
                        "Do they work 24-hour shifts?": "Often",
                        "Do they earn a high salary?": "Moderate, with benefits",
                        "Do they drive special vehicles?": "Yes, fire trucks",
                        "Do they respond to emergencies?": "Yes",
                        "Do they work outdoors?": "Yes, at emergency scenes",
                        "Do they train regularly?": "Yes, physical and technical training",
                        "Do they use specialized tools?": "Yes, axes, hoses, breathing apparatus",
                        "Do they work with the public?": "Yes, during emergencies and prevention",
                        "Is physical fitness important?": "Very important",
                        "Do they work for the government?": "Yes, municipal departments",
                        "Do they inspect buildings?": "Yes, for fire safety",
                        "Do they live at their workplace?": "During shifts, at the firehouse"
                    },
                    hint: "They respond to emergencies and put out fires"
                },
                {
                    name: "Programmer",
                    questions: {
                        "Do they work indoors?": "Yes, usually in offices",
                        "Do they need a college degree?": "Often, but not always required",
                        "Do they work with their hands?": "Yes, typing",
                        "Do they wear a uniform?": "No, usually casual dress",
                        "Do they work with technology?": "Yes, computers",
                        "Do they write code?": "Yes",
                        "Is their job dangerous?": "No",
                        "Do they work in teams?": "Often",
                        "Do they need special certification?": "Sometimes, but skills matter more",
                        "Do they work nights?": "Sometimes, especially before deadlines",
                        "Do they earn a high salary?": "Often",
                        "Do they debug problems?": "Yes",
                        "Do they work remotely?": "Increasingly common",
                        "Do they attend meetings?": "Yes",
                        "Do they create things?": "Yes, software and applications",
                        "Do they use specialized tools?": "Yes, programming languages and software",
                        "Do they work with the public?": "Rarely directly",
                        "Is physical fitness important?": "No",
                        "Do they work for tech companies?": "Often, but many industries need them",
                        "Do they solve problems?": "Yes, constantly",
                        "Do they continue learning throughout career?": "Yes, technology evolves quickly"
                    },
                    hint: "They write code to create software and applications"
                },
                {
                    name: "Pilot",
                    questions: {
                        "Do they work indoors?": "Partly, in a cockpit",
                        "Do they need a college degree?": "Often preferred",
                        "Do they work with their hands?": "Yes, operating controls",
                        "Do they wear a uniform?": "Yes, with stripes indicating rank",
                        "Do they work with technology?": "Yes, aircraft systems",
                        "Do they transport people?": "Yes",
                        "Is their job dangerous?": "Can be, but modern aviation is very safe",
                        "Do they work in teams?": "Yes, with co-pilots and crew",
                        "Do they need special certification?": "Yes, pilot's license",
                        "Do they work nights?": "Yes, on overnight flights",
                        "Do they earn a high salary?": "Yes, especially senior pilots",
                        "Do they travel internationally?": "Often",
                        "Do they make announcements?": "Yes, to passengers",
                        "Do they fly above clouds?": "Yes",
                        "Do they create things?": "No",
                        "Do they use specialized tools?": "Yes, aircraft controls and navigation",
                        "Do they work with the public?": "Yes, passengers",
                        "Is physical fitness important?": "Yes, and regular medical checks",
                        "Do they work for airlines?": "Often",
                        "Do they follow strict protocols?": "Yes, for safety",
                        "Do they check weather conditions?": "Yes, constantly"
                    },
                    hint: "They transport people through the air in aircraft"
                },
                {
                    name: "Lawyer",
                    questions: {
                        "Do they work indoors?": "Yes, offices and courtrooms",
                        "Do they need a college degree?": "Yes, plus law school",
                        "Do they work with their hands?": "No, mostly intellectual work",
                        "Do they wear a uniform?": "Sometimes formal attire in court",
                        "Do they work with legal documents?": "Yes",
                        "Do they represent clients?": "Yes",
                        "Is their job dangerous?": "Rarely",
                        "Do they work in teams?": "Sometimes, at law firms",
                        "Do they need special certification?": "Yes, bar admission",
                        "Do they work nights?": "Sometimes, especially before cases",
                        "Do they earn a high salary?": "Often, especially at large firms",
                        "Do they argue cases?": "Some do, in court",
                        "Do they research laws?": "Yes",
                        "Do they provide advice?": "Yes, legal counsel",
                        "Do they draft contracts?": "Yes",
                        "Do they use specialized tools?": "Legal databases and resources",
                        "Do they work with the public?": "Yes, clients",
                        "Do they specialize in specific areas?": "Often, like criminal or corporate law",
                        "Do they work for the government?": "Some do, as prosecutors or public defenders",
                        "Do they take an oath?": "Yes, when admitted to the bar",
                        "Are they self-employed?": "Sometimes have private practices"
                    },
                    hint: "They represent clients in legal matters and provide legal advice"
                }
            ];
            
            let currentOccupation;
            let selectedQuestions = 0;
            let selectedQuestionIds = [];
            let gameOver = false;
            let currentQuestions = [];
            
            function showToast(message) {
                // Check if a toast already exists and remove it
                const existingToast = document.querySelector('.toast-message');
                if (existingToast) {
                    existingToast.remove();
                }
                
                // Create toast element
                const toast = document.createElement('div');
                toast.className = 'toast-message fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg z-50 fade-in';
                toast.textContent = message;
                
                // Add to body
                document.body.appendChild(toast);
                
                // Remove after 2 seconds
                setTimeout(() => {
                    toast.style.opacity = '0';
                    setTimeout(() => {
                        toast.remove();
                    }, 300);
                }, 2000);
            }
            
            // Navigation functions
            function showHomePage() {
                document.getElementById('home-page').classList.remove('hidden');
                document.getElementById('game-page').classList.add('hidden');
            }
            
            function showGamePage() {
                document.getElementById('home-page').classList.add('hidden');
                document.getElementById('game-page').classList.remove('hidden');
                initGame();
            }
            
            function initGame() {
                // Reset game state
                selectedQuestions = 0;
                selectedQuestionIds = [];
                gameOver = false;
                document.getElementById('selected-count').textContent = '0';
                document.getElementById('result-container').classList.add('hidden');
                document.getElementById('hint-container').classList.add('hidden');
                
                // Reset stars
                document.querySelectorAll('.stars-container .star').forEach(star => {
                    star.classList.remove('filled');
                });
                
                // Choose a random occupation
                currentOccupation = occupations[Math.floor(Math.random() * occupations.length)];
                
                // Get questions for this occupation
                currentQuestions = Object.keys(currentOccupation.questions);
                
                // Update total questions count
                document.getElementById('total-questions').textContent = currentQuestions.length;
                
                // Generate question cards
                const questionsContainer = document.getElementById('questions-container');
                questionsContainer.innerHTML = '';
                
                currentQuestions.forEach((question, index) => {
                    const cardContainer = document.createElement('div');
                    cardContainer.className = 'card-container';
                    cardContainer.dataset.id = index;
                    
                    const card = document.createElement('div');
                    card.className = 'card';
                    
                    const cardFront = document.createElement('div');
                    cardFront.className = 'card-front';
                    cardFront.innerHTML = `
                        <p class="font-medium text-gray-800 text-center card-text">${question}</p>
                    `;
                    
                    const cardBack = document.createElement('div');
                    cardBack.className = 'card-back';
                    cardBack.innerHTML = `
                        <div class="text-center">
                            <p class="font-medium text-gray-800 mb-1 card-text">${question}</p>
                            <p class="text-indigo-700 font-bold card-text">${currentOccupation.questions[question]}</p>
                        </div>
                    `;
                    
                    card.appendChild(cardFront);
                    card.appendChild(cardBack);
                    cardContainer.appendChild(card);
                    
                    cardContainer.addEventListener('click', () => {
                        if (gameOver) return;
                        
                        // If already selected, do nothing
                        if (selectedQuestionIds.includes(index)) return;
                        
                        // Select and flip
                        card.classList.add('flipped');
                        selectedQuestions++;
                        selectedQuestionIds.push(index);
                        
                        // Add selected indicator
                        const indicator = document.createElement('div');
                        indicator.className = 'selected-indicator bg-indigo-600';
                        indicator.textContent = selectedQuestions;
                        cardFront.appendChild(indicator);
                        
                        // Update counter
                        document.getElementById('selected-count').textContent = selectedQuestions;
                        
                        // Show hint after 7 questions
                        if (selectedQuestions === 7) {
                            showHint();
                        }
                        
                        // Update potential stars
                        updateStarDisplay();
                    });
                    
                    questionsContainer.appendChild(cardContainer);
                });
                
                // Reset input
                document.getElementById('guess-input').value = '';
            }
            
            function updateStarDisplay() {
                const stars = document.querySelectorAll('.stars-container .star');
                const totalQuestions = currentQuestions.length;
                const oneThird = Math.ceil(totalQuestions / 3);
                const twoThirds = Math.ceil(2 * totalQuestions / 3);
                
                // Clear all stars
                stars.forEach(star => star.classList.remove('filled'));
                
                // Fill stars based on questions revealed
                if (selectedQuestions <= oneThird) {
                    stars[0].classList.add('filled');
                    stars[1].classList.add('filled');
                    stars[2].classList.add('filled');
                } else if (selectedQuestions <= twoThirds) {
                    stars[0].classList.add('filled');
                    stars[1].classList.add('filled');
                } else {
                    stars[0].classList.add('filled');
                }
            }
            
            function showHint() {
                // Show hint
                document.getElementById('hint-container').classList.remove('hidden');
                document.getElementById('hint-text').textContent = currentOccupation.hint;
            }
            
            function checkGuess() {
                const guess = document.getElementById('guess-input').value.trim().toLowerCase();
                const correctAnswer = currentOccupation.name.toLowerCase();
                
                const resultContainer = document.getElementById('result-container');
                const resultText = document.getElementById('result-text');
                
                if (guess === correctAnswer) {
                    resultText.textContent = `Correct! The occupation was ${currentOccupation.name}!`;
                    resultText.className = 'text-xl font-bold text-green-600';
                    
                    // Play sound effect for correct answer
                    playCorrectSound();
                    
                    // Create confetti animation
                    createConfetti();
                    
                    // Show star rating
                    showStarRating();
                } else {
                    resultText.textContent = `Sorry, the correct answer was ${currentOccupation.name}.`;
                    resultText.className = 'text-xl font-bold text-red-600';
                }
                
                resultContainer.classList.remove('hidden');
                gameOver = true;
            }
            
            function playCorrectSound() {
                // Try to play the sound effect
                try {
                    const sound = document.getElementById('correct-sound');
                    sound.currentTime = 0; // Reset to start
                    sound.play().catch(error => {
                        console.log("Audio couldn't play automatically:", error);
                        // This is expected in many browsers that block autoplay
                    });
                } catch (error) {
                    console.log("Error playing sound:", error);
                }
            }
            
            function showStarRating() {
                const starRating = document.getElementById('star-rating');
                const stars = starRating.querySelectorAll('.star');
                const totalQuestions = currentQuestions.length;
                const oneThird = Math.ceil(totalQuestions / 3);
                const twoThirds = Math.ceil(2 * totalQuestions / 3);
                
                // Clear all stars first
                stars.forEach(star => star.classList.remove('filled'));
                
                // Determine star rating based on questions revealed
                let rating = 1; // Default 1 star
                if (selectedQuestions <= oneThird) {
                    rating = 3;
                } else if (selectedQuestions <= twoThirds) {
                    rating = 2;
                }
                
                // Fill stars with animation delay
                for (let i = 0; i < rating; i++) {
                    setTimeout(() => {
                        stars[i].classList.add('filled');
                    }, i * 300);
                }
            }
            
            function createConfetti() {
                const container = document.body;
                const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
                
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = Math.random() * 10 + 5 + 'px';
                    confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    
                    container.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
            }
            
            // Event listeners
            document.getElementById('start-game').addEventListener('click', showGamePage);
            document.getElementById('submit-guess').addEventListener('click', checkGuess);
            document.getElementById('guess-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkGuess();
            });
            document.getElementById('play-again').addEventListener('click', initGame);
            document.getElementById('back-to-home').addEventListener('click', showHomePage);
            
            // Start on home page
            showHomePage();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'947cd82b83060744',t:'MTc0ODU5MzU2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
